!function(){angular.module("ngMinimalGrid",[]).directive("minimalGrid",["$parse","$filter",function(a,e){return{restrict:"E",scope:{columns:"<",rows:"<",fake:"<?",totalRows:"<?",paginationMax:"<?",paginationRange:"<?",changeOrderByCallback:"&?onChangeOrderBy",changePaginateCallback:"&?onChangePaginate",clickRowCallback:"&?onClickRow"},template:'<div ng-bind="statsParse()"></div><table class="dataTable table table-striped table-bordered table-hover no-footer">  <thead>    <tr>      <th ng-click="changeOrderBy(column)" ng-repeat="column in columns" class="{{ column.class }} {{ column.hide }}">{{ column.title }}</th>    </tr>  </thead>  <tbody>    <tr class="odd" ng-repeat="dataRow in data | limitTo : pages.max">      <td ng-click="clickRow(dataRow)" ng-repeat="column in columns" class="{{ columns[$index].hide }}" ng-bind="columnParse(columns[$index].key, dataRow, columns[$index])"></td>    </tr>  </tbody></table><div class="pull-right">  <ul class="pagination">    <li><a href="#" ng-click="changePaginate(pages.first)">Primeiro</a></li>    <li>      <a href="#" ng-click="changePaginate(pages.previous)">        << </a>    </li>    <li class="{{ ( n == pages.current ? \'active\' : \'\') }}"      ng-click="changePaginate(n)" ng-repeat="n in pages.total | limitTo : pages.range : pages.pagination"><a href="#">{{ n }}</a></li>    <li><a href="#" ng-click="changePaginate(pages.next)"> >> </a></li>    <li><a href="#" ng-click="changePaginate(pages.last)">Último</a></li>  </ul></div>        ',link:function(t){function n(a){t.pages.total=[]
for(var e=Math.ceil(a/t.pages.max),n=1;n<=e;n++)t.pages.total.push(n)}function l(){t.pages.current>t.pages.total.length&&(t.pages.current=1,t._lastPagePaginate=1),t.pages.first=1,t.pages.last=t.pages.total.length,t.pages.previous=t.pages.current-1>0?t.pages.current-1:1,t.pages.next=t.pages.current+1<=t.pages.total.length?t.pages.current+1:t.pages.total.length,t.pages.pagination=s()}function s(){var a=t.pages.current-1,e=t.pages.total.length-t.pages.range
return a>e&&(a=e),a<0&&(a=0),a}function r(a){t._data=a,t.data=Object.assign([],t._data)}t.$watchCollection("rows",function(a){r(a),t.fake||(n(t.data.length),l(),t._lastColumnOrderBy&&t.changeOrderBy(t._lastColumnOrderBy),t._lastPagePaginate&&t.changePaginate(t._lastPagePaginate))}),(t.fake||t.totalRows)&&t.$watch("totalRows",function(a){t._lastTotalPopulatePages=a,n(a),l()}),t.columnParse=function(t,n,l){var s=a(t),r=s(n)
return l.formatDate&&(r=e("date")(1e3*r,l.formatDate,"+0000")),l.onRender=l.onRender||function(a){return a},l.onRender(r)},t.statsParse=function(){var a="Mostrando %1 à %2 de %3 registros",e=(t.pages.current-1)*t.pages.max>0?(t.pages.current-1)*t.pages.max+1:t._data.length>0?1:0
if(t.fake)if(void 0!=t._lastTotalPopulatePages)var n=(t.pages.current-1)*t.pages.max+t.pages.max<t._lastTotalPopulatePages?(t.pages.current-1)*t.pages.max+t.pages.max:t._lastTotalPopulatePages,l=t._lastTotalPopulatePages
else var n=0,l=0
else var n=(t.pages.current-1)*t.pages.max+t.pages.max<t._data.length?(t.pages.current-1)*t.pages.max+t.pages.max:t._data.length,l=t._data.length
return a.replace("%1",e).replace("%2",n).replace("%3",l)},t.changeOrderBy=function(a){if(t._lastColumnOrderBy!=a){var n=a.class
t.columns.map(function(a){a.class="sorting"}),a.class="sorting_asc"==n?"sorting_desc":"sorting_asc",t._lastColumnOrderBy=Object.assign({},a)}if(!t.fake){1!=t.pages.current&&(t.pages.current=1,r(t._data),l())
r(e("orderBy")(t.data,a.key,"sorting_desc"==a.class))}t.changeOrderByCallback&&t.changeOrderByCallback({orderBy:{orderdirection:a.class.replace("sorting_",""),orderby:a.key}})},t.changePaginate=function(a){if(t._lastPagePaginate=Number(a),t.pages.current=a,l(),!t.fake){r(t._data)
var e=t.pages.current-1>0?(t.pages.current-1)*t.pages.max:0
t.data=t.data.slice(e)}t.changePaginateCallback&&t.changePaginateCallback({pages:t.pages})},t.clickRow=function(a){t.clickRowCallback&&t.clickRowCallback({row:a})},t._data=[],t.data=[],t._lastColumnOrderBy=void 0,t._lastPagePaginate=void 0,t._lastTotalPopulatePages=void 0,t.fake=t.fake||!1,t.columns.map(function(a){a.class="sorting"}),t.pages={first:1,last:1,previous:1,next:1,current:1,total:[1],max:t.paginationMax||10,range:t.paginationRange||5,pagination:0}}}}])}()
